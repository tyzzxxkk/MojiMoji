<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moji Moji ë­í‚¹</title>

    <style>
        @font-face {
            font-family: 'KotraHope';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2110@1.0/KOTRAHOPE.woff2') format('woff2');
        }
        @font-face {
            font-family: 'JejuStoneWall';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2210-EF@1.0/EF_jejudoldam.woff2') format('woff2');
        }

        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background-image: url('/static/images/emoji.jpg');
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: 'KotraHope';
            padding: 60px 0;
        }

        h1 {
            font-size: 80px;
            font-family: 'JejuStoneWall';
            margin-bottom: 30px;
        }

        .category-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 30px;
            font-family: 'KotraHope';
        }

        .category-btn {
            padding: 15px 25px;
            font-size: 22px;
            font-weight: 900;
            border-radius: 15px;
            border: 4px solid #000;
            background: #fff99a;
            cursor: pointer;
            font-family: 'KotraHope';
        }

        .active-btn {
            background: #ffe047;
            transform: scale(1.1);
        }

        .ranking-container {
            background: white;
            border: 6px solid #000;
            border-radius: 20px;
            width: 80%;
            max-width: 850px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 30px;
            display: none;
            overflow: hidden; /* ëª¨ì„œë¦¬ ë§¤ë„ëŸ½ê²Œ */
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }

        th {
            padding: 18px;
            font-size: 26px;
            font-weight: 900;
            background: white;
            border-bottom: 6px solid #000;
        }

        td {
            padding: 22px 20px;
            font-size: 24px;
            font-weight: 700;
            text-align: center;
            border-bottom: 6px solid #000;
        }

        tr:last-child td {
            border-bottom: none;
        }

        .rank-1 { background: #FFF9E6; }
        .rank-2 { background: #F5F5F5; }
        .rank-3 { background: #FFF4E6; }

        .back-button {
            padding: 18px 45px;
            background: #fff99a;
            border-radius: 15px;
            border: 4px solid #000;
            text-decoration: none;
            font-size: 23px;
            font-weight: 900;
            margin-top: 20px;
        }
    </style>
</head>

<body>

<h1>Moji Moji</h1>

<!-- ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ -->
<div class="category-buttons">
    <button class="category-btn" onclick="showCategory('all')">ì „ì²´</button>
    <button class="category-btn" onclick="showCategory('drama')">ë“œë¼ë§ˆ</button>
    <button class="category-btn" onclick="showCategory('movie')">ì˜í™”</button>
    <button class="category-btn" onclick="showCategory('song')">ë…¸ë˜</button>
    <button class="category-btn" onclick="showCategory('tv_program')">ì˜ˆëŠ¥</button>
</div>


<!-- ì „ì²´ ë­í‚¹ -->
<div id="box-all" class="ranking-container">
    <table>
        <thead>
        <tr>
            <th>ìˆœìœ„</th>
            <th>ì•„ì´ë””</th>
            <th>ì ìˆ˜</th>
            <th>ì¹´í…Œê³ ë¦¬</th>
            <th>ë‚ ì§œ</th>
        </tr>
        </thead>
        <tbody>
        {% for row in ranking_all %}
            <tr class="{% if loop.index == 1 %}rank-1{% elif loop.index == 2 %}rank-2{% elif loop.index == 3 %}rank-3{% endif %}">
                <td>
                    {% if loop.index == 1 %}ğŸ¥‡
                    {% elif loop.index == 2 %}ğŸ¥ˆ
                    {% elif loop.index == 3 %}ğŸ¥‰
                    {% else %}{{ loop.index }}{% endif %}
                </td>
                <td>{{ row.username }}</td>
                <td>{{ row.total_score }}ì </td>

                <!-- í•œêµ­ì–´ ë³€í™˜ ì ìš© -->
                <td>
                    {% if row.category == "drama" %}ë“œë¼ë§ˆ
                    {% elif row.category == "movie" %}ì˜í™”
                    {% elif row.category == "song" %}ë…¸ë˜
                    {% elif row.category == "tv_program" %}ì˜ˆëŠ¥
                    {% endif %}
                </td>

                <td>{{ row.last_play.strftime('%m/%d') }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>


<!-- ì¹´í…Œê³ ë¦¬ë³„ -->
{% for category, rows in ranking_by_category.items() %}
<div id="box-{{ category }}" class="ranking-container">
    <table>
        <thead>
        <tr>
            <th>ìˆœìœ„</th>
            <th>ì•„ì´ë””</th>
            <th>ì ìˆ˜</th>
            <th>ë‚ ì§œ</th>
        </tr>
        </thead>
        <tbody>
        {% for row in rows %}
            <tr class="{% if loop.index == 1 %}rank-1{% elif loop.index == 2 %}rank-2{% elif loop.index == 3 %}rank-3{% endif %}">
                <td>
                    {% if loop.index == 1 %}ğŸ¥‡
                    {% elif loop.index == 2 %}ğŸ¥ˆ
                    {% elif loop.index == 3 %}ğŸ¥‰
                    {% else %}{{ loop.index }}{% endif %}
                </td>
                <td>{{ row.username }}</td>
                <td>{{ row.total_score }}ì </td>
                <td>{{ row.last_play.strftime('%m/%d') }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endfor %}

<a href="/game_select" class="back-button">â† ê²Œì„ ì„ íƒìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>


<script>
    function showCategory(category) {
        document.querySelectorAll(".ranking-container").forEach(
            box => box.style.display = "none"
        );

        document.querySelector("#box-" + category).style.display = "block";

        document.querySelectorAll(".category-btn").forEach(
            btn => btn.classList.remove("active-btn")
        );
        event.target.classList.add("active-btn");
    }

    showCategory("all");
</script>

</body>
</html>